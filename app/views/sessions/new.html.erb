<!DOCTYPE html>
<html lang="en" class="light-style customizer-hide" dir="ltr" data-theme="theme-default">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Login - TestApp</title>

    <%= csrf_meta_tags %>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="<%= asset_path('img/favicon/favicon.ico') %>" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />

    <!-- Icons -->
    <link rel="stylesheet" href="/assets/fonts/boxicons.css" />

    <!-- Sneat CSS -->
    <%= stylesheet_link_tag "core", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "theme-default", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "demo", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "vendor/perfect-scrollbar", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "pages/page-auth", "data-turbo-track": "reload" %>

    <!-- Helpers -->
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <div class="container-xxl">
      <div class="authentication-wrapper authentication-basic container-p-y">
        <div class="authentication-inner">

          <!-- Login Card -->
          <div class="card">
            <div class="card-body">

              <!-- Logo -->
              <div class="app-brand justify-content-center mb-4">
                <span class="app-brand-text demo text-body fw-bolder">TestApp</span>
              </div>

              <h4 class="mb-2">Sign In</h4>

              <!-- Flash Messages -->
              <% if flash[:alert] %>
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                  <%= flash[:alert] %>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              <% end %>
              <% if flash[:notice] %>
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                  <%= flash[:notice] %>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              <% end %>

              <!-- RAILS FORM STARTS -->
              <%= form_with url: "/login", method: :post, class: "mb-3", 
                  data: { controller: "validation", action: "submit->validation#validate" } do |f| %>

                <div class="mb-3">
                  <%= f.label :email, "Email or Username", class: "form-label" %>
                  <%= f.text_field :email, placeholder: "Enter your email or username", class: "form-control", data: { validation_target: "email" } %>
                </div>

                <div class="mb-3 form-password-toggle">
                  <div class="d-flex justify-content-between">
                    <%= f.label :password, class: "form-label" %>
                    <%= link_to "/password_resets/new" do %>
                      <small>Forgot Password?</small>
                    <% end %>
                  </div>
                  <div class="input-group input-group-merge">
                    <%= f.password_field :password,
                      class: "form-control", data: { validation_target: "password" } %>
                    <span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
                  </div>
                </div>

                <div class="mb-3">
                  <%= f.submit "Sign in", class: "btn btn-primary d-grid w-100" %>
                </div>

              <% end %>
              <!-- RAILS FORM END -->

              <p class="text-center">
                <span>New on our platform?</span>
                <%= link_to "Create an account", "/users/new" %>
              </p>

            </div>
          </div>
          <!-- /Login Card -->

        </div>
      </div>
    </div>

    <!-- Sneat JS -->
    <script type="module">
      import 'jquery';
      import 'popper';
      import 'helpers';
      import 'bootstrap';
      import 'config';
      import 'menu';
      import 'main';
    </script>
  </body>
</html>
